<html>

<head>
  <title>Metamask Demo</title>

  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
  <script src="https://unpkg.com/moralis/dist/moralis.js"></script>
  <script src="https://github.com/WalletConnect/walletconnect-monorepo/releases/download/1.6.2/web3-provider.min.js">
  </script>
</head>

<body>
  <button onclick="login()">Login</button>
  <button onclick="logout()">logout</button>
  <p id ="wallet"></p>

  <script>
    Moralis.initialize("iXfQJrKLSzRtPBKETfyia7akkCopGhCLxddmyxLw");
    Moralis.serverURL = "https://m3oiviwg53p6.bigmoralis.com:2053/server";

    async function login() {
      var walletProvider = "walletconnect";
      if (typeof web3 !== 'undefined') {
        walletProvider = "metamask";
      }
      Moralis.authenticate({
        provider: walletProvider,
        chainId: 56,
        //signingMessage: "56"
      }).then((user) => {
        console.log(user.attributes);
        document.getElementById("wallet").innerHTML = user.get('ethAddress');
      });
    }

    async function logout() {
      Moralis.User.logOut().then(() => {
        const currentUser = Moralis.User.current(); // this will now be null
        console.log("logged out");
        console.log(currentUser);
      });
    }
  </script>
</body>

</html>
