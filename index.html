<html>

<head>
  <title>Metamask Demo</title>

  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
  <script src="https://unpkg.com/moralis/dist/moralis.js"></script>
  <script src="https://github.com/WalletConnect/walletconnect-monorepo/releases/download/1.6.2/web3-provider.min.js">
  </script>
</head>

<body>
  <button onclick="login()">Login with Metamask</button>
  <button onclick="task()">Task</button>
  <button onclick="logout()">logout</button>
  <button onclick="inch2()">inch2</button>
  <button onclick="loadUsers()">loadUsers</button>

  <script>
    Moralis.initialize("vxU1uKdAyCvntgW90Z4nwT9wc3PNvKIlROuY3tr9");
    Moralis.serverURL = "https://9gpkdfpybsmu.moralis.io:2053/server";

    async function login() {
      var walletProvider = "walletconnect";
      if (typeof web3 !== 'undefined') {
        walletProvider = "metamask";
      }
      Moralis.authenticate({
        provider: walletProvider,
        chainId: 56,
        signingMessage:"hello"
      }).then(function (user) {
        alert(user.id)
      });
    }

    async function logout() {
      Moralis.User.logOut().then(() => {
        const currentUser = Moralis.User.current(); // this will now be null
        console.log("logged out");
        console.log(currentUser);
      });
    }
  </script>
</body>

</html>
